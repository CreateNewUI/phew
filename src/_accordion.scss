/**
 * Accordion
 */

// Chevron icon
$chevron: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23495057' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
$chevron-primary: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%231b6ec2' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

// Base accordion styles
details {
  padding: 0;
  border: 1px solid var(--border-muted);
  background-color: var(--background);

  summary {
    padding: var(--spacing-s) var(--spacing-m);
    list-style-type: none;
    color: var(--content-primary);
    cursor: pointer;
    user-select: none;
    transition: color var(--default-transition-duration) ease-in-out, background-color var(--default-transition-duration) ease-in-out;

    // Remove default markers
    &::-webkit-details-marker,
    &::marker {
      display: none;
    }

    // Custom chevron icon
    &::after {
      content: "";
      float: right;
      width: var(--size-xs);
      height: var(--size-xs);
      margin-left: var(--spacing-04);
      background: $chevron right center / var(--size-xs) no-repeat;
      transform: rotate(-90deg);
      transition: transform var(--default-transition-duration) ease-in-out;
    }

    &:hover {
      background-color: var(--background-hover);
    }

    &:focus-visible {
      outline: 1.5px solid var(--border-focus);
      outline-offset: var(--spacing-04);
    }
  }

  > :not(summary) {
    padding: var(--spacing-s) var(--spacing-m);
  }

  // Open state
  &[open] {
    padding-bottom: var(--spacing-m);

    >summary {
      border-bottom: 1px solid var(--border-muted);
      color: var(--content-primary);

      &::after {
        transform: rotate(0);
      }
    }
  }
}

// Primary variant
details[data-variant="primary"] {
  border-color: var(--link);

  summary {
    color: var(--link);
    background-color: var(--background);

    &::after {
      background-image: $chevron-primary;
    }
  }
}

// Borderless variant
details[data-variant="borderless"] {
  border: none;
  background-color: transparent;

  summary {}

  &[open]>summary {
    border-bottom: none;
  }
}